# Кассы (Cashboxes)

## Назначение
- Касса — источник/приёмник всех финансовых движений.
- Баланс — **расчётный** (не хранится в `cashboxes`), считается по `cashbox_history`.

## Данные и хранение
- Таблица: `cashboxes`
  - `name`, `description`, `is_active`
  - `logo_source`: `preset|custom`
  - `logo_preset_id` → `cashbox_logos.id`
  - `logo_path` (если `custom`)
- Пресеты логотипов: `cashbox_logos`
- Файлы логотипов:
  - пресеты и кастом — `storage/app/public/cashboxes/*`
  - публичный URL: `/storage/cashboxes/...`

## UI‑стандарт (обязателен)
- **В любых таблицах и селектах** касса отображается как: **логотип + название**.
- Исключение: в справочнике касс отдельные колонки «Логотип» и «Название».

Применяется к:
- Транзакциям, приходам, расходам, выплатам, балансу.
- Формам/селектам в договорах и выплатах.

## API
- `/api/settings/cash-boxes` — CRUD касс.
- `/api/settings/cashbox-logos` — CRUD пресетов логотипов.
- `/api/finance/cashboxes` — список касс + баланс.

Ответы должны включать `cashbox.logo_url` для корректного UI‑рендера.

## Удаление
- Удаление кассы запрещено, если есть связанные транзакции/приходы/расходы.
- Если связей нет — жёсткое удаление.

См. также: `docs/finance/DELETION_AND_PAYROLL_RULES.md`.
