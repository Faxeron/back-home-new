<?php

declare(strict_types=1);

use Illuminate\Database\Migrations\Migration;
use Illuminate\Support\Facades\DB;

return new class extends Migration
{
    public function up(): void
    {
        if (DB::connection($this->connection)->getDriverName() === 'pgsql') {
            return;
        }

        $now = now();
        $items = [
            ['fond_id' => 2, 'name' => 'РЎРµРїС‚РёРє'],
            ['fond_id' => 2, 'name' => 'РљРѕР»РѕРґРµС†'],
            ['fond_id' => 2, 'name' => 'Р”СЂРµРЅР°Р¶РЅС‹Р№ С‚РѕРЅРЅРµР»СЊ'],
            ['fond_id' => 2, 'name' => 'РљРѕРјРїР»РµРєС‚СѓСЋС‰РёРµ'],
            ['fond_id' => 2, 'name' => 'Р”РѕСЃС‚Р°РІРєР° РґРѕ РіРѕСЂРѕРґР°'],
            ['fond_id' => 2, 'name' => 'РњР°С‚РµСЂРёР°Р»С‹'],
            ['fond_id' => 2, 'name' => 'РЎРїРµС†С‚РµС…РЅРёРєР° - Р­РєСЃРєР°РІР°С‚РѕСЂ'],
            ['fond_id' => 2, 'name' => 'Р—Рџ РњРµРЅРµРґР¶РµСЂ'],
            ['fond_id' => 2, 'name' => 'Р—Рџ Р—Р°РјРµСЂС‰РёРє'],
            ['fond_id' => 2, 'name' => 'Р—Рџ РњРѕРЅС‚Р°Р¶РЅРёРє'],
            ['fond_id' => 2, 'name' => 'РќР°Р»РѕРіРё'],
            ['fond_id' => 2, 'name' => 'РљРѕРјРёСЃСЃРёРѕРЅРЅРѕРµ РІРѕР·РЅР°РіСЂР°Р¶РґРµРЅРёРµ'],
            ['fond_id' => 2, 'name' => 'Р”РѕСЃС‚Р°РІРєР° РґРѕ СѓС‡Р°СЃС‚РєР°'],
            ['fond_id' => 2, 'name' => 'РЎРїРµС†С‚РµС…РЅРёРєР° - РљСЂР°РЅ'],
            ['fond_id' => 2, 'name' => 'РЎРїРµС†С‚РµС…РЅРёРєР° - Р“СЂСѓР·РѕРІРѕР№ Р°РІС‚Рѕ'],
            ['fond_id' => 2, 'name' => 'РЎРїРµС†С‚РµС…РЅРёРєР° - Р’РѕРґРѕРІРѕР·'],
            ['fond_id' => 2, 'name' => 'РўРµСЃС‚ РРЅСЃС‚СЂСѓРјРµРЅС‚'],
            ['fond_id' => 2, 'name' => 'РўРµСЃС‚ РљРѕРјРїР»РµРєС‚СѓСЋС‰РёРµ'],
            ['fond_id' => 2, 'name' => 'РўРµСЃС‚ Р Р°Р±РѕС‚С‹ РїРѕ РјРѕРЅС‚Р°Р¶Сѓ'],
            ['fond_id' => 2, 'name' => 'РўРµСЃС‚ Р Р°Р±РѕС‚Р° РјРѕРЅС‚Р°Р¶РЅРѕР№ РіСЂСѓРїРїС‹'],
        ];

        $payload = array_map(fn ($item) => [
            'fond_id' => $item['fond_id'],
            'name' => $item['name'],
            'is_active' => true,
            'created_at' => $now,
            'updated_at' => $now,
        ], $items);

        DB::connection('legacy_new')->table('spending_items')->insertOrIgnore($payload);
    }

    public function down(): void
    {
        DB::connection('legacy_new')
            ->table('spending_items')
            ->where('fond_id', 2)
            ->whereIn('name', [
                'РЎРµРїС‚РёРє',
                'РљРѕР»РѕРґРµС†',
                'Р”СЂРµРЅР°Р¶РЅС‹Р№ С‚РѕРЅРЅРµР»СЊ',
                'РљРѕРјРїР»РµРєС‚СѓСЋС‰РёРµ',
                'Р”РѕСЃС‚Р°РІРєР° РґРѕ РіРѕСЂРѕРґР°',
                'РњР°С‚РµСЂРёР°Р»С‹',
                'РЎРїРµС†С‚РµС…РЅРёРєР° - Р­РєСЃРєР°РІР°С‚РѕСЂ',
                'Р—Рџ РњРµРЅРµРґР¶РµСЂ',
                'Р—Рџ Р—Р°РјРµСЂС‰РёРє',
                'Р—Рџ РњРѕРЅС‚Р°Р¶РЅРёРє',
                'РќР°Р»РѕРіРё',
                'РљРѕРјРёСЃСЃРёРѕРЅРЅРѕРµ РІРѕР·РЅР°РіСЂР°Р¶РґРµРЅРёРµ',
                'Р”РѕСЃС‚Р°РІРєР° РґРѕ СѓС‡Р°СЃС‚РєР°',
                'РЎРїРµС†С‚РµС…РЅРёРєР° - РљСЂР°РЅ',
                'РЎРїРµС†С‚РµС…РЅРёРєР° - Р“СЂСѓР·РѕРІРѕР№ Р°РІС‚Рѕ',
                'РЎРїРµС†С‚РµС…РЅРёРєР° - Р’РѕРґРѕРІРѕР·',
                'РўРµСЃС‚ РРЅСЃС‚СЂСѓРјРµРЅС‚',
                'РўРµСЃС‚ РљРѕРјРїР»РµРєС‚СѓСЋС‰РёРµ',
                'РўРµСЃС‚ Р Р°Р±РѕС‚С‹ РїРѕ РјРѕРЅС‚Р°Р¶Сѓ',
                'РўРµСЃС‚ Р Р°Р±РѕС‚Р° РјРѕРЅС‚Р°Р¶РЅРѕР№ РіСЂСѓРїРїС‹',
            ])->delete();
    }
};

